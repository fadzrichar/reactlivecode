{"ast":null,"code":"var _jsxFileName = \"/home/alta6/Alta/Challenge_react/src/Pages/newsCategory.jsx\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\"; // Custom Components\n\nimport Header from \"../Components/header\";\nimport ListNews from \"../Components/listNews\";\nimport TopNews from \"../Components/topNews\"; // NEWS API\n\nconst apiKey = \"293e5a8d202a42f788880487d3bc4c2e\";\nconst baseUrl = \"https://newsapi.org/v2/\";\nconst urlHeadline = baseUrl + \"top-headlines?country=us&pageSize=5&apiKey=\" + apiKey;\nconst urlEverything = baseUrl + \"everything?domains=wsj.com,nytimes.com&apiKey=\" + apiKey;\n\nclass NewsCategory extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      listTopNews: [],\n      listEverything: [],\n      isLoading: true\n    };\n\n    this.handleRouterCategoryNews = async categoryName => {\n      const category = categoryName;\n      await this.props.history.replace(\"/news-category/\" + category);\n      this.everything();\n      this.topArticle();\n    };\n\n    this.componentDidMount = () => {\n      this.topArticle();\n      this.everything();\n    };\n\n    this.everything = async () => {\n      const paramCategory = await this.props.match.params.category;\n      const self = this;\n      await axios.get(urlEverything + \"&q=\" + paramCategory).then(function (response) {\n        self.setState({\n          listEverything: response.data.articles,\n          isLoading: false\n        }); // handle success\n\n        console.log(response.data);\n      }).catch(function (error) {\n        self.setState({\n          isLoading: false\n        }); // handle error\n\n        console.log(error);\n      });\n    };\n\n    this.handleInputChange = async event => {\n      let value = event.target.value;\n      console.warn(\"value check\", value);\n      await this.setState({\n        search: value\n      });\n      this.searchNews(value);\n    };\n\n    this.searchNews = async keyword => {\n      const self = this;\n\n      if (keyword.length > 3) {\n        try {\n          const response = await axios.get(baseUrl + \"everything?q=\" + keyword + \"&apiKey=\" + apiKey);\n          self.setState({\n            listTopNews: response.data.articles\n          });\n        } catch (error) {\n          console.error(error);\n        }\n      }\n    };\n\n    this.topArticle = async () => {\n      const paramCategory = this.props.match.params.category;\n      const self = this;\n      await axios.get(urlHeadline + \"&category=\" + paramCategory).then(function (response) {\n        self.setState({\n          listTopNews: response.data.articles,\n          isLoading: false\n        }); // handle success\n\n        console.log(response.data);\n      }).catch(function (error) {\n        self.setState({\n          isLoading: false\n        }); // handle error\n\n        console.log(error);\n      });\n    };\n  }\n\n  render() {\n    const _this$state = this.state,\n          listTopNews = _this$state.listTopNews,\n          listEverything = _this$state.listEverything,\n          isLoading = _this$state.isLoading;\n    const topHeadlines = listTopNews.filter(item => {\n      if (item.content !== null && item.image !== null) {\n        return item;\n      }\n\n      return false;\n    });\n    const headlineNews = topHeadlines.map((item, key) => {\n      return React.createElement(TopNews, {\n        key: key,\n        title: item.title,\n        img: item.urlToImage,\n        content: item.description,\n        url: item.url,\n        time: item.publishedAt,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      });\n    });\n    const topEvery = listEverything.filter(item => {\n      if (item.content !== null && item.image !== null) {\n        return item;\n      }\n\n      return false;\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Header, Object.assign({\n      doSearch: event => this.handleInputChange(event),\n      handleRouter: e => this.handleRouterCategoryNews(e),\n      isCategoryNews: true\n    }, this.props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"container\",\n      style: {\n        marginTop: \"70px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(ListNews, {\n      req_article: topEvery,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-7\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, isLoading ? React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Loading...\") : headlineNews))));\n  }\n\n}\n\nexport default NewsCategory;","map":{"version":3,"sources":["/home/alta6/Alta/Challenge_react/src/Pages/newsCategory.jsx"],"names":["React","Component","axios","Header","ListNews","TopNews","apiKey","baseUrl","urlHeadline","urlEverything","NewsCategory","state","listTopNews","listEverything","isLoading","handleRouterCategoryNews","categoryName","category","props","history","replace","everything","topArticle","componentDidMount","paramCategory","match","params","self","get","then","response","setState","data","articles","console","log","catch","error","handleInputChange","event","value","target","warn","search","searchNews","keyword","length","render","topHeadlines","filter","item","content","image","headlineNews","map","key","title","urlToImage","description","url","publishedAt","topEvery","e","marginTop","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n\n// Custom Components\nimport Header from \"../Components/header\";\nimport ListNews from \"../Components/listNews\";\nimport TopNews from \"../Components/topNews\";\n\n// NEWS API\nconst apiKey = \"293e5a8d202a42f788880487d3bc4c2e\";\nconst baseUrl = \"https://newsapi.org/v2/\";\nconst urlHeadline = baseUrl + \"top-headlines?country=us&pageSize=5&apiKey=\" + apiKey;\nconst urlEverything = baseUrl + \"everything?domains=wsj.com,nytimes.com&apiKey=\" + apiKey;\n\nclass NewsCategory extends Component {\n\tstate = {\n\t\tlistTopNews: [],\n\t\tlistEverything : [],\n\t\tisLoading: true,\n\t};\n\n    handleRouterCategoryNews = async categoryName => {\n        const category = categoryName;\n        await this.props.history.replace(\"/news-category/\" + category);\n        this.everything();\n        this.topArticle();\n    }\n\n\tcomponentDidMount = () => {\n\t\tthis.topArticle();\n\t\tthis.everything()\n\t};\n\n\teverything = async () => {\n        const paramCategory = await this.props.match.params.category;\n\t\tconst self = this;\n\t\tawait axios\n\t\t.get(urlEverything + \"&q=\" + paramCategory)\n\t\t.then(function(response) {\n\t\t  self.setState({ listEverything: response.data.articles, isLoading: false });\n\t\t  // handle success\n\t\t  console.log(response.data);\n\t\t})\n\t\t.catch(function(error) {\n\t\t  self.setState({ isLoading: false });\n\t\t  // handle error\n\t\t  console.log(error);\n\t\t});\n\t}\n\n\thandleInputChange = async event => {\n\t\tlet value = event.target.value;\n\t\tconsole.warn(\"value check\", value);\n\t\tawait this.setState({ search: value });\n\t\tthis.searchNews(value);\n\t};\n\n\tsearchNews = async keyword => {\n\t\tconst self = this;\n\t\tif (keyword.length > 3) {\n\t\t\ttry {\n\t\t\t\tconst response = await axios.get(\n\t\t\t\t\tbaseUrl + \"everything?q=\" + keyword + \"&apiKey=\" + apiKey\n\t\t\t\t);\n\t\t\t\tself.setState({ listTopNews: response.data.articles });\n\t\t\t}\tcatch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t}\n\t};\n\n\ttopArticle = async () => {\n        const paramCategory = this.props.match.params.category;\n\t\tconst self = this;\n\t\tawait axios\n\t\t.get(urlHeadline + \"&category=\" + paramCategory)\n\t\t.then(function(response) {\n\t\t  self.setState({ listTopNews: response.data.articles, isLoading: false });\n\t\t  // handle success\n\t\t  console.log(response.data);\n\t\t})\n\t\t.catch(function(error) {\n\t\t  self.setState({ isLoading: false });\n\t\t  // handle error\n\t\t  console.log(error);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { listTopNews, listEverything, isLoading } = this.state;\n\t\t\n\t\tconst topHeadlines = listTopNews.filter(item => {\n\t\t\tif (item.content !== null && item.image !== null) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t\treturn false;\n\t\t})\n\n\t\tconst headlineNews = topHeadlines.map((item, key) => {\n\t\t\treturn (\n\t\t\t\t<TopNews\n\t\t\t\t\tkey={key}\n\t\t\t\t\ttitle={item.title}\n\t\t\t\t\timg={item.urlToImage}\n\t\t\t\t\tcontent={item.description}\n\t\t\t\t\turl={item.url}\n\t\t\t\t\ttime={item.publishedAt}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\n\t\tconst topEvery = listEverything.filter(item => {\n\t\t\tif (item.content !== null && item.image !== null) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t\treturn false;\n\t\t})\n\n\treturn (\n\t\t<div>\n\t\t\t<Header \n            doSearch={event => this.handleInputChange(event)}\n            handleRouter={e => this.handleRouterCategoryNews(e)}\n            isCategoryNews={true}\n\t\t\t{...this.props}\n\t\t\t/>\n\t\t\t<div className=\"container\" style={{marginTop:\"70px\"}}>\n\t\t\t\t<div className=\"row \">\n\t\t\t\t\t<div className=\"col-5\">\n\t\t\t\t\t\t<ListNews req_article={topEvery} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-7\">\n\t\t\t\t\t\t{isLoading ? <div style={{ textAlign: \"center\" }}>Loading...</div> : headlineNews}               \n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t  );\n\t}\n}\n\nexport default NewsCategory;"]},"metadata":{},"sourceType":"module"}