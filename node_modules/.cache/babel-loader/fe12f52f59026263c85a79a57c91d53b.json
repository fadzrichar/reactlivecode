{"ast":null,"code":"import _regeneratorRuntime from\"/home/alta6/Alta/Challenge_react/challenge_react/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/home/alta6/Alta/Challenge_react/challenge_react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/alta6/Alta/Challenge_react/challenge_react/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/alta6/Alta/Challenge_react/challenge_react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/alta6/Alta/Challenge_react/challenge_react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/alta6/Alta/Challenge_react/challenge_react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/alta6/Alta/Challenge_react/challenge_react/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import axios from\"axios\";// Custom Components\nimport Header from\"../Components/header\";import ListNews from\"../Components/listNews\";import TopNews from\"../Components/topNews\";// NEWS API\nvar apiKey=\"293e5a8d202a42f788880487d3bc4c2e\";var baseUrl=\"https://newsapi.org/v2/\";var urlHeadline=baseUrl+\"top-headlines?country=us&pageSize=5&apiKey=\"+apiKey;var urlEverything=baseUrl+\"everything?domains=wsj.com,nytimes.com&apiKey=\"+apiKey;var NewsCategory=/*#__PURE__*/function(_Component){_inherits(NewsCategory,_Component);function NewsCategory(){var _getPrototypeOf2;var _this;_classCallCheck(this,NewsCategory);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(NewsCategory)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={listTopNews:[],listEverything:[],isLoading:true};_this.handleRouterCategoryNews=function _callee(categoryName){var category;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:category=categoryName;_context.next=3;return _regeneratorRuntime.awrap(_this.props.history.replace(\"/news-category/\"+category));case 3:_this.everything();_this.topArticle();case 5:case\"end\":return _context.stop();}}});};_this.componentDidMount=function(){_this.topArticle();_this.everything();};_this.everything=function _callee2(){var paramCategory,self;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(_this.props.match.params.category);case 2:paramCategory=_context2.sent;self=_assertThisInitialized(_this);_context2.next=6;return _regeneratorRuntime.awrap(axios.get(urlEverything+\"&q=\"+paramCategory).then(function(response){self.setState({listEverything:response.data.articles,isLoading:false});// handle success\nconsole.log(response.data);}).catch(function(error){self.setState({isLoading:false});// handle error\nconsole.log(error);}));case 6:case\"end\":return _context2.stop();}}});};_this.handleInputChange=function _callee3(event){var value;return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:value=event.target.value;console.warn(\"value check\",value);_context3.next=4;return _regeneratorRuntime.awrap(_this.setState({search:value}));case 4:_this.searchNews(value);case 5:case\"end\":return _context3.stop();}}});};_this.searchNews=function _callee4(keyword){var self,response;return _regeneratorRuntime.async(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:self=_assertThisInitialized(_this);if(!(keyword.length>3)){_context4.next=12;break;}_context4.prev=2;_context4.next=5;return _regeneratorRuntime.awrap(axios.get(baseUrl+\"everything?q=\"+keyword+\"&apiKey=\"+apiKey));case 5:response=_context4.sent;self.setState({listTopNews:response.data.articles});_context4.next=12;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](2);console.error(_context4.t0);case 12:case\"end\":return _context4.stop();}}},null,null,[[2,9]]);};_this.topArticle=function _callee5(){var paramCategory,self;return _regeneratorRuntime.async(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:paramCategory=_this.props.match.params.category;self=_assertThisInitialized(_this);_context5.next=4;return _regeneratorRuntime.awrap(axios.get(urlHeadline+\"&category=\"+paramCategory).then(function(response){self.setState({listTopNews:response.data.articles,isLoading:false});// handle success\nconsole.log(response.data);}).catch(function(error){self.setState({isLoading:false});// handle error\nconsole.log(error);}));case 4:case\"end\":return _context5.stop();}}});};return _this;}_createClass(NewsCategory,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,listTopNews=_this$state.listTopNews,listEverything=_this$state.listEverything,isLoading=_this$state.isLoading;var topHeadlines=listTopNews.filter(function(item){if(item.content!==null&&item.image!==null){return item;}return false;});var headlineNews=topHeadlines.map(function(item,key){return React.createElement(TopNews,{key:key,title:item.title,img:item.urlToImage,content:item.description,url:item.url,time:item.publishedAt});});var topEvery=listEverything.filter(function(item){if(item.content!==null&&item.image!==null){return item;}return false;});return React.createElement(\"div\",null,React.createElement(Header,Object.assign({doSearch:function doSearch(event){return _this2.handleInputChange(event);},handleRouter:function handleRouter(e){return _this2.handleRouterCategoryNews(e);},isCategoryNews:true},this.props)),React.createElement(\"div\",{className:\"container\",style:{marginTop:\"70px\"}},React.createElement(\"div\",{className:\"row \"},React.createElement(\"div\",{className:\"col-5\"},React.createElement(ListNews,{req_article:topEvery})),React.createElement(\"div\",{className:\"col-7\"},isLoading?React.createElement(\"div\",{style:{textAlign:\"center\"}},\"Loading...\"):headlineNews))));}}]);return NewsCategory;}(Component);export default NewsCategory;","map":{"version":3,"sources":["/home/alta6/Alta/Challenge_react/challenge_react/src/Pages/newsCategory.jsx"],"names":["React","Component","axios","Header","ListNews","TopNews","apiKey","baseUrl","urlHeadline","urlEverything","NewsCategory","state","listTopNews","listEverything","isLoading","handleRouterCategoryNews","categoryName","category","props","history","replace","everything","topArticle","componentDidMount","match","params","paramCategory","self","get","then","response","setState","data","articles","console","log","catch","error","handleInputChange","event","value","target","warn","search","searchNews","keyword","length","topHeadlines","filter","item","content","image","headlineNews","map","key","title","urlToImage","description","url","publishedAt","topEvery","e","marginTop","textAlign"],"mappings":"06BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA;AACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CAEA;AACA,GAAMC,CAAAA,MAAM,CAAG,kCAAf,CACA,GAAMC,CAAAA,OAAO,CAAG,yBAAhB,CACA,GAAMC,CAAAA,WAAW,CAAGD,OAAO,CAAG,6CAAV,CAA0DD,MAA9E,CACA,GAAMG,CAAAA,aAAa,CAAGF,OAAO,CAAG,gDAAV,CAA6DD,MAAnF,C,GAEMI,CAAAA,Y,uZACLC,K,CAAQ,CACPC,WAAW,CAAE,EADN,CAEPC,cAAc,CAAG,EAFV,CAGPC,SAAS,CAAE,IAHJ,C,OAMLC,wB,CAA2B,iBAAMC,YAAN,gIACjBC,QADiB,CACND,YADM,kDAEjB,MAAKE,KAAL,CAAWC,OAAX,CAAmBC,OAAnB,CAA2B,kBAAoBH,QAA/C,CAFiB,SAGvB,MAAKI,UAAL,GACA,MAAKC,UAAL,GAJuB,8C,OAO9BC,iB,CAAoB,UAAM,CACzB,MAAKD,UAAL,GACA,MAAKD,UAAL,GACA,C,OAEDA,U,CAAa,kNACsB,MAAKH,KAAL,CAAWM,KAAX,CAAiBC,MAAjB,CAAwBR,QAD9C,SACAS,aADA,gBAENC,IAFM,iFAGNzB,KAAK,CACV0B,GADK,CACDnB,aAAa,CAAG,KAAhB,CAAwBiB,aADvB,EAELG,IAFK,CAEA,SAASC,QAAT,CAAmB,CACvBH,IAAI,CAACI,QAAL,CAAc,CAAElB,cAAc,CAAEiB,QAAQ,CAACE,IAAT,CAAcC,QAAhC,CAA0CnB,SAAS,CAAE,KAArD,CAAd,EACA;AACAoB,OAAO,CAACC,GAAR,CAAYL,QAAQ,CAACE,IAArB,EACD,CANK,EAOLI,KAPK,CAOC,SAASC,KAAT,CAAgB,CACrBV,IAAI,CAACI,QAAL,CAAc,CAAEjB,SAAS,CAAE,KAAb,CAAd,EACA;AACAoB,OAAO,CAACC,GAAR,CAAYE,KAAZ,EACD,CAXK,CAHM,iD,OAiBbC,iB,CAAoB,kBAAMC,KAAN,iIACfC,KADe,CACPD,KAAK,CAACE,MAAN,CAAaD,KADN,CAEnBN,OAAO,CAACQ,IAAR,CAAa,aAAb,CAA4BF,KAA5B,EAFmB,kDAGb,MAAKT,QAAL,CAAc,CAAEY,MAAM,CAAEH,KAAV,CAAd,CAHa,SAInB,MAAKI,UAAL,CAAgBJ,KAAhB,EAJmB,+C,OAOpBI,U,CAAa,kBAAMC,OAAN,yIACNlB,IADM,oCAERkB,OAAO,CAACC,MAAR,CAAiB,CAFT,+FAIa5C,KAAK,CAAC0B,GAAN,CACtBrB,OAAO,CAAG,eAAV,CAA4BsC,OAA5B,CAAsC,UAAtC,CAAmDvC,MAD7B,CAJb,SAIJwB,QAJI,gBAOVH,IAAI,CAACI,QAAL,CAAc,CAAEnB,WAAW,CAAEkB,QAAQ,CAACE,IAAT,CAAcC,QAA7B,CAAd,EAPU,mFASVC,OAAO,CAACG,KAAR,eATU,kE,OAcbf,U,CAAa,gKACAI,aADA,CACgB,MAAKR,KAAL,CAAWM,KAAX,CAAiBC,MAAjB,CAAwBR,QADxC,CAENU,IAFM,iFAGNzB,KAAK,CACV0B,GADK,CACDpB,WAAW,CAAG,YAAd,CAA6BkB,aAD5B,EAELG,IAFK,CAEA,SAASC,QAAT,CAAmB,CACvBH,IAAI,CAACI,QAAL,CAAc,CAAEnB,WAAW,CAAEkB,QAAQ,CAACE,IAAT,CAAcC,QAA7B,CAAuCnB,SAAS,CAAE,KAAlD,CAAd,EACA;AACAoB,OAAO,CAACC,GAAR,CAAYL,QAAQ,CAACE,IAArB,EACD,CANK,EAOLI,KAPK,CAOC,SAASC,KAAT,CAAgB,CACrBV,IAAI,CAACI,QAAL,CAAc,CAAEjB,SAAS,CAAE,KAAb,CAAd,EACA;AACAoB,OAAO,CAACC,GAAR,CAAYE,KAAZ,EACD,CAXK,CAHM,iD,+EAiBJ,iCAC2C,KAAK1B,KADhD,CACAC,WADA,aACAA,WADA,CACaC,cADb,aACaA,cADb,CAC6BC,SAD7B,aAC6BA,SAD7B,CAGR,GAAMiC,CAAAA,YAAY,CAAGnC,WAAW,CAACoC,MAAZ,CAAmB,SAAAC,IAAI,CAAI,CAC/C,GAAIA,IAAI,CAACC,OAAL,GAAiB,IAAjB,EAAyBD,IAAI,CAACE,KAAL,GAAe,IAA5C,CAAkD,CACjD,MAAOF,CAAAA,IAAP,CACA,CACD,MAAO,MAAP,CACA,CALoB,CAArB,CAOA,GAAMG,CAAAA,YAAY,CAAGL,YAAY,CAACM,GAAb,CAAiB,SAACJ,IAAD,CAAOK,GAAP,CAAe,CACpD,MACC,qBAAC,OAAD,EACC,GAAG,CAAEA,GADN,CAEC,KAAK,CAAEL,IAAI,CAACM,KAFb,CAGC,GAAG,CAAEN,IAAI,CAACO,UAHX,CAIC,OAAO,CAAEP,IAAI,CAACQ,WAJf,CAKC,GAAG,CAAER,IAAI,CAACS,GALX,CAMC,IAAI,CAAET,IAAI,CAACU,WANZ,EADD,CAUA,CAXoB,CAArB,CAaA,GAAMC,CAAAA,QAAQ,CAAG/C,cAAc,CAACmC,MAAf,CAAsB,SAAAC,IAAI,CAAI,CAC9C,GAAIA,IAAI,CAACC,OAAL,GAAiB,IAAjB,EAAyBD,IAAI,CAACE,KAAL,GAAe,IAA5C,CAAkD,CACjD,MAAOF,CAAAA,IAAP,CACA,CACD,MAAO,MAAP,CACA,CALgB,CAAjB,CAOD,MACC,gCACC,oBAAC,MAAD,gBACS,QAAQ,CAAE,kBAAAV,KAAK,QAAI,CAAA,MAAI,CAACD,iBAAL,CAAuBC,KAAvB,CAAJ,EADxB,CAES,YAAY,CAAE,sBAAAsB,CAAC,QAAI,CAAA,MAAI,CAAC9C,wBAAL,CAA8B8C,CAA9B,CAAJ,EAFxB,CAGS,cAAc,CAAE,IAHzB,EAII,KAAK3C,KAJT,EADD,CAOC,2BAAK,SAAS,CAAC,WAAf,CAA2B,KAAK,CAAE,CAAC4C,SAAS,CAAC,MAAX,CAAlC,EACC,2BAAK,SAAS,CAAC,MAAf,EACC,2BAAK,SAAS,CAAC,OAAf,EACC,oBAAC,QAAD,EAAU,WAAW,CAAEF,QAAvB,EADD,CADD,CAIC,2BAAK,SAAS,CAAC,OAAf,EACE9C,SAAS,CAAG,2BAAK,KAAK,CAAE,CAAEiD,SAAS,CAAE,QAAb,CAAZ,eAAH,CAA2DX,YADtE,CAJD,CADD,CAPD,CADD,CAoBC,C,0BA5HyBnD,S,EA+H3B,cAAeS,CAAAA,YAAf","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n\n// Custom Components\nimport Header from \"../Components/header\";\nimport ListNews from \"../Components/listNews\";\nimport TopNews from \"../Components/topNews\";\n\n// NEWS API\nconst apiKey = \"293e5a8d202a42f788880487d3bc4c2e\";\nconst baseUrl = \"https://newsapi.org/v2/\";\nconst urlHeadline = baseUrl + \"top-headlines?country=us&pageSize=5&apiKey=\" + apiKey;\nconst urlEverything = baseUrl + \"everything?domains=wsj.com,nytimes.com&apiKey=\" + apiKey;\n\nclass NewsCategory extends Component {\n\tstate = {\n\t\tlistTopNews: [],\n\t\tlistEverything : [],\n\t\tisLoading: true,\n\t};\n\n    handleRouterCategoryNews = async categoryName => {\n        const category = categoryName;\n        await this.props.history.replace(\"/news-category/\" + category);\n        this.everything();\n        this.topArticle();\n    }\n\n\tcomponentDidMount = () => {\n\t\tthis.topArticle();\n\t\tthis.everything()\n\t};\n\n\teverything = async () => {\n        const paramCategory = await this.props.match.params.category;\n\t\tconst self = this;\n\t\tawait axios\n\t\t.get(urlEverything + \"&q=\" + paramCategory)\n\t\t.then(function(response) {\n\t\t  self.setState({ listEverything: response.data.articles, isLoading: false });\n\t\t  // handle success\n\t\t  console.log(response.data);\n\t\t})\n\t\t.catch(function(error) {\n\t\t  self.setState({ isLoading: false });\n\t\t  // handle error\n\t\t  console.log(error);\n\t\t});\n\t}\n\n\thandleInputChange = async event => {\n\t\tlet value = event.target.value;\n\t\tconsole.warn(\"value check\", value);\n\t\tawait this.setState({ search: value });\n\t\tthis.searchNews(value);\n\t};\n\n\tsearchNews = async keyword => {\n\t\tconst self = this;\n\t\tif (keyword.length > 3) {\n\t\t\ttry {\n\t\t\t\tconst response = await axios.get(\n\t\t\t\t\tbaseUrl + \"everything?q=\" + keyword + \"&apiKey=\" + apiKey\n\t\t\t\t);\n\t\t\t\tself.setState({ listTopNews: response.data.articles });\n\t\t\t}\tcatch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t}\n\t};\n\n\ttopArticle = async () => {\n        const paramCategory = this.props.match.params.category;\n\t\tconst self = this;\n\t\tawait axios\n\t\t.get(urlHeadline + \"&category=\" + paramCategory)\n\t\t.then(function(response) {\n\t\t  self.setState({ listTopNews: response.data.articles, isLoading: false });\n\t\t  // handle success\n\t\t  console.log(response.data);\n\t\t})\n\t\t.catch(function(error) {\n\t\t  self.setState({ isLoading: false });\n\t\t  // handle error\n\t\t  console.log(error);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { listTopNews, listEverything, isLoading } = this.state;\n\t\t\n\t\tconst topHeadlines = listTopNews.filter(item => {\n\t\t\tif (item.content !== null && item.image !== null) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t\treturn false;\n\t\t})\n\n\t\tconst headlineNews = topHeadlines.map((item, key) => {\n\t\t\treturn (\n\t\t\t\t<TopNews\n\t\t\t\t\tkey={key}\n\t\t\t\t\ttitle={item.title}\n\t\t\t\t\timg={item.urlToImage}\n\t\t\t\t\tcontent={item.description}\n\t\t\t\t\turl={item.url}\n\t\t\t\t\ttime={item.publishedAt}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\n\t\tconst topEvery = listEverything.filter(item => {\n\t\t\tif (item.content !== null && item.image !== null) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t\treturn false;\n\t\t})\n\n\treturn (\n\t\t<div>\n\t\t\t<Header \n            doSearch={event => this.handleInputChange(event)}\n            handleRouter={e => this.handleRouterCategoryNews(e)}\n            isCategoryNews={true}\n\t\t\t{...this.props}\n\t\t\t/>\n\t\t\t<div className=\"container\" style={{marginTop:\"70px\"}}>\n\t\t\t\t<div className=\"row \">\n\t\t\t\t\t<div className=\"col-5\">\n\t\t\t\t\t\t<ListNews req_article={topEvery} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-7\">\n\t\t\t\t\t\t{isLoading ? <div style={{ textAlign: \"center\" }}>Loading...</div> : headlineNews}               \n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t  );\n\t}\n}\n\nexport default NewsCategory;"]},"metadata":{},"sourceType":"module"}